% Template for typesetting my math homework at UWaterloo
% Based on https://github.com/francois-rozet/sleek-template, among other things
\ProvidesPackage{homework}[2023/10/17 Ravi Brock's Homework]

%%%%%%%%%%%%%%%%%%%%
% Sources packages %
%%%%%%%%%%%%%%%%%%%%

% Packages without options
\RequirePackage{amsmath,amssymb,amstext,amsthm}
\RequirePackage{cntperchap}
\RequirePackage{enumerate}
\RequirePackage{graphicx}
\RequirePackage{linearb}
\RequirePackage{listings}
\RequirePackage{mathabx}
\RequirePackage{thmtools}
\RequirePackage{titlesec}
\RequirePackage{tocloft}
\RequirePackage{parskip} % Must be loaded after tocloft
\RequirePackage{xcolor}

% Packages with options
\RequirePackage[nomessages]{fp}
\RequirePackage[margin=0.75in]{geometry}
\RequirePackage[hidelinks]{hyperref}
\RequirePackage[utf8]{inputenc}
\RequirePackage[most]{tcolorbox}

% Custom packages
\RequirePackage{body}
\RequirePackage{title}

%%%%%%%%%%%%
% Commands %
%%%%%%%%%%%%

% Enable Linear B variables for fun
\newcommand\lb[1]{\scalebox{0.675}{\textlinb{#1}}}

% Miscellaneous
\newcommand{\ds}{\displaystyle}
\renewcommand{\qedsymbol}{$\blacksquare$}

% Update footnote styling
\makeatletter
\renewcommand\footnoterule{%
    \kern-3\p@
    \hrule\@width \textwidth
    \kern2.6\p@
}
\makeatother
\addtolength{\footnotesep}{2pt}
\let\myfootnote\footnote
\renewcommand\footnote[1]{\myfootnote{{#1}\vspace{-3pt}}}

% Change imply arrow styling (optional)
\renewcommand*{\implies}{\Rightarrow}
\renewcommand*{\impliedby}{\Leftarrow}
% \renewcommand*{\iff}{\Leftrightarrow}

% Limits and modulo
\newcommand{\Lim}[1]{\raisebox{0.5ex}{\scalebox{0.8}{$\displaystyle \lim_{#1}\;$}}}
\newcommand{\Mod}[1]{\ (\mathrm{mod}\ #1)}
\renewcommand{\lg}[2]{\displaystyle\Big(\frac{#1}{#2}\Big)} % Legendre/Jacobi symbols

% Blackboard bold
\def\R{{\mathbb R}}
\def\Z{{\mathbb Z}}
\def\N{{\mathbb N}}
\def\Q{{\mathbb Q}}
\def\C{{\mathbb C}}
\def\F{{\mathbb F}}

% Fix spacing for \exists and \forall
\let\oldexists\exists
\let\oldforall\forall
\let\exists\undefined
\let\forall\undefined
\DeclareMathOperator{\exists}{\oldexists}
\DeclareMathOperator{\forall}{\oldforall}

% Plaintext abbreviations in equations
\def\Aut{\textrm{Aut}}
\def\char{\textrm{char}}
\def\dim{\textrm{dim}}
\def\ev{\textrm{ev}}
\def\id{\textrm{id}}
\def\im{\textrm{im}}
\def\lcm{\textrm{lcm}}

%%%%%%%%%%%%%%%%%%%%%
% Table of contents %
%%%%%%%%%%%%%%%%%%%%%

\hypersetup{linktocpage}
\setcounter{tocdepth}{0}
\setlength{\cftchapnumwidth}{0pt}
\renewcommand{\cftchappresnum}{\chaptername\ }
\renewcommand{\cftchapaftersnum}{}
\renewcommand{\cftchapaftersnumb}{\newline}
\renewcommand{\cftchapdotsep}{\cftdotsep}
\newcommand*{\romantableofcontents}{
    \hfuzz 1000pt % Disable overfull hbox error
    \newpage
    \pagenumbering{roman}
    \tableofcontents
    \newpage
    \pagenumbering{arabic}
    \hfuzz 0pt % Re-enable overfull hbox error
}

%%%%%%%%%%%%%%%%%%%%%%%%
% Miscellaneous config %
%%%%%%%%%%%%%%%%%%%%%%%%

\def\coloneqq{\mathrel{\mathop:}=}

\titleformat{\chapter}[display]
{\bfseries\Huge} % format
{\chaptertitlename\ \thechapter} % label
{0ex}{
    \Large
    \textit
}{\vspace{0ex}}

\titlespacing*{\chapter}
{0pt}{-30pt}{30pt}

% Break equations across pages
\allowdisplaybreaks

% Adjusts section styling
\renewcommand*{\thesection}{\arabic{section}}
